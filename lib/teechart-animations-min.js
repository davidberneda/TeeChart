/*
 TeeChart(tm) for JavaScript(tm)
 @fileOverview TeeChart for JavaScript(tm)
 v1.2 September 2012
 Copyright(c) 2012 by Steema Software SL. All Rights Reserved.
 http://www.steema.com

 Licensed with commercial and non-commercial attributes,
 specifically: http://www.steema.com/licensing/html5

 JavaScript is a trademark of Oracle Corporation.
*/
var Tee=Tee||{};
(function(){"undefined"!==typeof exports&&(exports.Tee=Tee);Tee.Animation=function(c,f){Tee.Tool.call(this,c);this.active=!0;this.mode="linear";this.duration=500;this.items=[];c&&(c instanceof Tee.Chart?this.chart=c:c instanceof Tee.Animation&&(this.chart=c.chart,c.items.push(this)));var b=null;this.animate=function(a){a&&(this.chart=a);this.init=(new Date).getTime();b=this;b.start();for(var a=0,d;d=b.items[a++];)d.active&&(d.chart=b.chart,d.start());b.chart.draw();requestAnimFrame(this.step,this)};
this.start=function(){};this.stop=function(){};this.doStep=function(a){f&&f(a)};this.step=function(a){a||(a=(new Date).getTime());var d,a=(a-b.init)/b.duration,e="linear"==b.mode?a:Math.pow(2,10*(a-1));if(0<=e&&1>e){b.doStep(e);for(a=0;d=b.items[a++];)d.active&&(d.chart=b.chart,d.doStep(e));b.chart.draw();requestAnimFrame(b.step,b)}else{b.stop();for(a=0;d=b.items[a++];)d.active&&(d.chart=b.chart,d.stop());if(b.onstop)b.onstop(b);b.chart.draw()}}};Tee.Animation.prototype=new Tee.Tool;Tee.FadeAnimation=
function(c){Tee.Animation.call(this,c);this.kind="in";var f=this,b;this.fade={};this.setTransp=function(a){"out"==f.kind&&(a=1-a);b.legend&&(f.chart.legend.format.transparency=a);b.walls&&(f.chart.walls.transparency=a);b.series&&f.chart.series.each(function(d){d.format.transparency=a});b.title&&(f.chart.title.format.transparency=a);b.axes&&(f.chart.axes.transparency=a);b.panel&&(f.chart.panel.format.transparency=a)};this.start=function(){b=this.fade;this.setTransp(1)};this.stop=function(){this.setTransp(0)};
this.doStep=function(a){f.setTransp(1-a)}};Tee.FadeAnimation.prototype=new Tee.Animation;Tee.SeriesAnimation=function(c){function f(d,a,b){a.automatic=!1;var c=0.5*(d.oldmin+d.oldmax),d=0.5*(d.oldmax-d.oldmin);a.maximum=c+b*d;a.minimum=c-b*d}Tee.Animation.call(this,c);c instanceof Tee.Series?(this.series=c,this.chart=c.chart):this.series=null;this.oldmax=this.oldmin=0;this.oldauto=!0;var b=1,a=this;this.kind="axis";this.getAxis=function(){var a=this.series||this.chart.series.firstVisible();return a?
a.mandatoryAxis:null};this.doStep=function(d){var e=a.getAxis(),g=a.chart.series.items[0];e.automatic=!1;var c=g.data.values,h=g.data._old,i=c.length;if("each"==a.kind){g=i*d|0;for(e=0;e<g;e++)c[e]=h[e];g<i&&(c[g]=h[g]*(i*d-g))}else if("all"==a.kind)for(e=0;e<i;e++)c[e]=h[e]*d;else g instanceof Tee.Pie?(g.rotation=360*(1-d),b=d):"axis"!=a.kind?b=d:f(a,e,1+100*(1-d))};this.stop=function(){var b=a.getAxis(),e=a.chart.series.items[0];b.maximum=a.oldmax;b.minimum=a.oldmin;b.automatic=a.oldauto;e.transform&&
(e.transform=null);if("each"==a.kind||"all"==a.kind)e.data.values=e.data._old,e.data._old=null};this.start=function(){var a=this.getAxis(),e=this.chart,c=e.series.items,j=e.chartRect.width,h=e.chartRect.height;if(0==c.length)return!1;this.oldmin=a.minimum;this.oldmax=a.maximum;this.oldauto=a.automatic;if(c[0]instanceof Tee.Pie)c[0].transform=function(){this.chart.ctx.scale(b,b)};else if("each"==this.kind||"all"==this.kind){var e=c[0].data.values,i=e.length;c[0].data._old=e.slice(0);for(c=0;c<i;c++)e[c]=
0;a.automatic=!1}else"left"==this.kind?c[0].transform=function(){var a=this.chart.ctx;a.translate(-j,0);a.scale(b,1);a.translate(j,0)}:"x"==this.kind?c[0].transform=function(){this.chart.ctx.scale(b,1)}:"y"==this.kind?c[0].transform=function(){this.chart.ctx.scale(1,b)}:"top"==this.kind?c[0].transform=function(){var a=this.chart.ctx;a.translate(0,-h);a.scale(1,b);a.translate(0,h)}:f(this,a,100)}};Tee.SeriesAnimation.prototype=new Tee.Animation;Tee.MarksAnimation=function(c){function f(b,c,d){return c<=
a.current?d:""}Tee.Animation.call(this,c);c&&c instanceof Tee.Series?(this.series=c,this.chart=c.chart):this.series=null;this.current=-1;var b=this.series.marks,a=this,d;this.start=function(){d=b.ongettext;b.ongettext=f};this.stop=function(){b.ongettext=d;this.current=-1};this.doStep=function(b){a.current=a.series.data.values.length*b|0}};Tee.MarksAnimation.prototype=new Tee.Animation}).call(this);
